<!DOCTYPE html>
<html lang="cn">
<head>
<meta name="renderer" content="webkit" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="icon" href="image/mj.png" type="image/x-icon">  <!--在网页标题左侧显示图标 -->
<link rel="shortcut icon" href="image/mj.png" type="image/x-icon">  <!--在收藏夹显示图标-->
<title>DDM4J API Document</title>
<!-- CSS 导入 -->
<link href="css/jquery-accordion-menu.css" rel="stylesheet"
	type="text/css" />
<link href="css/font-awesome.css" rel="stylesheet" type="text/css" />
<link href="css/content-table.css" rel="stylesheet" type="text/css" />
<link href="css/content.css" rel="stylesheet" type="text/css" />

<style type="text/css">
* {
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
}

html {
	width: 100%;
	height: 100%;
}

body {
	background: #f0f0f0;
	padding: 0;
	margin: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

#vue_app {
	width: 100%;
	/* padding-left: 1%;
	padding-right: 1%; */
}

.content {
	width: 100%;
	height: 100%;
	margin: 0 auto;
	padding-top: 60px;
}

/* 输入框 */
.filterinput {
	background-color: rgba(249, 244, 244, 0);
	border-radius: 15px;
	width: 90%;
	height: 30px;
	border: thin solid #555;
	text-indent: 0.5em;
	font-weight: bold;
	color: #4e4949;
}

/*菜单列表*/
#menu-list a {
	overflow: hidden;
	text-overflow: ellipsis;
	-o-text-overflow: ellipsis;
	white-space: nowrap;
	width: 100%;
}

.content-head {
	width: 100%;
	height: 60px;
	background-color: #88be04;
	position: relative;
	position: fixed;
}

.content-menu {
	width: 260px;
	height: calc(100% - 120px);
	position: fixed;
}

.jquery-accordion-menu {
	height: 100%;
}

.jquery-accordion-menu ul {
	width: 260px;
	height: calc(100% - 50px);
	float: left;
	overflow-y: auto;
}

/* 滚动条样式 */
.content ::-webkit-scrollbar {
	width: 6px; /*高宽分别对应横竖滚动条的尺寸*/
	height: 1px;
}

.content ::-webkit-scrollbar-thumb {
	/*滚动条里面小方块*/
	border-radius: 10px;
	box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
	background: #00cb9f;
}

.content ::-webkit-scrollbar-track {
	/*滚动条里面轨道*/
	box-shadow: inset 0 0 5px rgba(167, 163, 163, 0.2);
	border-radius: 10px;
	background: #ededed;
}

#test_box ::-webkit-scrollbar{
	width: 6px; /*高宽分别对应横竖滚动条的尺寸*/
	height: 5px;
}
#test_box ::-webkit-scrollbar-thumb {
	/*滚动条里面小方块*/
	border-radius: 10px;
	box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
	/*background: #00cb9f;*/
	background: #aaa;
}
#test_box ::-webkit-scrollbar-track {
	/*滚动条里面轨道*/
	box-shadow: inset 0 0 5px rgba(167, 163, 163, 0.2);
	border-radius: 10px;
	background: #ededed;
}
</style>
<!-- JS 导入 -->
<script src="js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="js/vue.min.js" type="text/javascript"></script>
<script src="js/jquery-accordion-menu.js" type="text/javascript"></script>
<script src="js/clipboard.min.js" type="text/javascript"></script>
</head>
<body>
	<div id="vue_app">
		<div class="content-head">
			<div class="title">DDM4J API Document</div>
			<div class="head-system">{{system}}</div>
			<div class="desc">
				<div>{{(version==null || version == '')?"V1.0":version}}</div>
				<div v-if="describe && describe != ''">{{describe}}</div>
			</div>
		</div>
		<!-- 登录 -->
		<div v-if="!login" class="container" id="login">
			<div class="login">
				<h1>Login</h1>
				<div class="form-group">
					<input type="email" v-model="account" placeholder="account">
				</div>
				<div class="form-group">
					<input type="password" v-model="password" placeholder="password">
				</div>
				<input type="button" @Click="loadData" value="Sign in"
					class="btn btn-lg btn-block btn-success">
			</div>
		</div>
		<!-- 正文 -->
		<div class="content" v-if="login">
			<!-- 菜单 -->
			<div class="content-menu">
				<div id="jquery-accordion-menu" class="jquery-accordion-menu white">
					<div class="jquery-accordion-menu-header" id="form">
						<input class="filterinput" type="text" v-model="scan_str"
							v-on:input="sacn()">
					</div>
					<ul id="menu-list">
						<li v-for="item,index in interfaceDatas" v-show="!item.hide"><a
							href="#">{{item.name?item.name:item.controller}} </a>
							<ul class="submenu">
								<li v-for="interface in item.interfaces"
									v-show="!interface.hide" @click="myClickOne(item,interface)">
									<a href="#">{{interface.name}}<br> {{interface.uri}}
								</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<!-- 正文内容 -->
			<div class="content-right">
				<div class="content_over">

					<!-- controller 说明 -->
					<div class="content-controller">
						<div class="controller-title"><span v-if="selectionController.name">{{selectionController.name}}&nbsp;:&nbsp;&nbsp;</span>{{selectionController.controller}}</div>
						<div class="controller-version">
							<span v-if="selectionController.author">作者：&nbsp;&nbsp;{{selectionController.author}}&nbsp;;&nbsp;&nbsp;&nbsp;</span>
							<span v-if="selectionController.version">版本：{{selectionController.version}}</span>
						</div>
						<!-- <div class="controller-uri" v-if="selectionController.uri">请求路径:
						&nbsp;&nbsp;{{selectionController.uri}}</div> -->
						<div class="controller-desc" v-if="selectionController.describe">描述说明：&nbsp;&nbsp;{{selectionController.describe}}</div>
						
					</div>
					<hr style="margin-top:0px">

					<!-- 接口说明 -->
					<div class="content-interface">
						<div class="interface-title">{{selectionInterface.name}}&nbsp;<span v-if="selectionInterface.version">:&nbsp;&nbsp;{{selectionInterface.version}}</span>
							<input type="button" @Click="click_test" class="test_btn" title="打开测试窗口，并还原显示位置"
								value="测试窗口">
						</div>
						<div class="interface-uri">
							请求路径: <span class="interface-method tag"
								v-show="selectionInterface.method">{{selectionInterface.method}}</span>
							&nbsp;&nbsp;{{selectionInterface.uri}} <input type="button"
								@Click="copyStr(selectionInterface.uri)" class="copy_btn"
								style="margin-left: 20px;" value="复制">
						</div>
						<div class="controller-desc" v-if="selectionInterface.describe">描述说明：&nbsp;&nbsp;{{selectionInterface.describe}}</div>
						<div class="other" v-if="selectionInterface.author">
							<span class="interface-author">作者：&nbsp;&nbsp;{{selectionInterface.author}}</span>
							
						</div>
					</div>
					<!-- 请求头 -->
					<div class="content-table"
						v-if="selectionInterface.heads && selectionInterface.heads.length > 0">
						<div class="title">Headers</div>
						<table class="bordered">
							<thead>
								<tr>
									<th class="left field">字段</th>
									<th class="type">类型</th>
									<th class="required">必填</th>
									<th class="left">示例说明</th>
									<th class="length">最小&nbsp;/&nbsp;最大</th>
									<th class="reg">正则校验</th>
								</tr>
							</thead>
							<tbody>
								<tr v-for="item in selectionInterface.heads">
									<td class="left field"><input type="button"
										@Click="copyStr(item.field)" class="copy_btn" value="复制">
										{{item.field}}</td>
									</td>
									<td class="type">{{item.type}}</td>
									<td class="required"><span v-if="item.required"
										class="required_true">是</span> <span v-if="!item.required"
										class="required_false">否</span></td>
									<td class="left">{{item.describe}}</td>
									<td class="length">{{(item.min || item.min == 0)?item.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item.max || item.max == 0)?item.max:'-'}}</td>
									<td class="reg">{{item.regexp}}</td>
								</tr>
							</tbody>
						</table>
					</div>
					<!-- uri参数 -->
					<div class="content-table"
						v-if="selectionInterface.uriParams && selectionInterface.uriParams.length > 0">
						<div class="title">URI</div>
						<table class="bordered">
							<thead>
								<tr>
									<th class="left field">字段</th>
									<th class="type">类型</th>
									<th class="required">必填</th>
									<th class="left">示例说明</th>
									<th class="length">最小&nbsp;/&nbsp;最大</th>
									<th class="reg">正则校验</th>
								</tr>
							</thead>
							<tbody>
								<tr v-for="item in selectionInterface.uriParams">
									<td class="left field"><input type="button"
										@Click="copyStr(item.field)" class="copy_btn" value="复制">
										{{item.field}}</td>
									</td>
									<td class="type">{{item.type}}</td>
									<td class="required">
										<span class="required_true">是</span>
									<td class="left">{{item.describe}}</td>
									<td class="length">{{(item.min || item.min == 0)?item.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item.max || item.max == 0)?item.max:'-'}}</td>
									<td class="reg">{{item.regexp}}</td>
								</tr>
							</tbody>
						</table>
					</div>
					<!-- 请求参数 -->
					<div class="content-table"
						v-if="selectionInterface.parameters && selectionInterface.parameters.length > 0">
						<div class="title">
							Request：&nbsp;&nbsp;&nbsp;&nbsp; 
							<span class="interface-method tag"
								v-show="selectionInterface.method">{{selectionInterface.method}}</span>&nbsp;&nbsp; 
							<span class="tag" v-show="selectionInterface.json">JSON</span> 
							<span class="tag" v-show="!selectionInterface.json">form-data</span>&nbsp;&nbsp; 
							<span class="tag" v-if="selectionInterface.jsonMethod">{{selectionInterface.jsonMethod}}</span>
						</div>
						<table class="bordered">
							<thead>
								<tr>
									<th class="left field">字段</th>
									<th class="type">类型</th>
									<th class="required">必填</th>
									<th class="left">示例说明</th>
									<th class="length">最小&nbsp;/&nbsp;最大</th>
									<th class="reg">正则校验</th>
								</tr>
							</thead>
							<tbody>
								<template v-for="(item,index) in selectionInterface.parameters">
								<!-- 第一层 -->
								<template v-if="selectionInterface.json || (item.type.indexOf('Object') == -1 || item.type.indexOf('Object<?>') != -1)">
								<tr>
									<td class="left field"><input type="button"
										@Click="copyStr(item.field)" class="copy_btn" value="复制">
										<span v-if="item.url" class="tag">URI</span> 
										<span v-if="item.get" class="tag">GET</span> 
										{{item.field}} <span class="table-show"
										v-if="item.children && item.children.length > 0 && add_show_request('1',index)"
										@Click="show_request('1',index)">
											{{show.request.one[index].show?"-":"+"}}</span>
									</td>

									<td class="type">{{item.type}}</td>
									<td class="required"><span v-if="item.required"
										class="required_true">是</span> <span v-if="!item.required"
										class="required_false">否</span></td>
									<td class="left">{{item.describe}}</td>
									<td class="length">{{(item.min || item.min == 0)?item.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item.max || item.max == 0)?item.max:'-'}}</td>
									<td class="reg">{{item.regexp}}</td>
									
								</tr>
								
								<template v-if="show.request.one[index].show && selectionInterface.json"
									v-for="(item2,index2) in item.children"> <!-- 第二层 -->
								<tr>
									<td class="left field"><input type="button"
										@Click="copyStr(item2.field)" class="copy_btn" value="复制">
										<span class="param_love">-></span>&nbsp;{{item2.field}} <span
										class="table-show"
										v-if="item2.children  && item2.children.length > 0 && add_show_request('2',index2)"
										@Click="show_request('2',index2)">
											{{show.request.two[index2].show?"-":"+"}}</span></td>

									<td class="type">{{item2.type}}</td>
									<td class="required"><span v-if="item2.required"
										class="required_true">是</span> <span v-if="!item2.required"
										class="required_false">否</span></td>
									<td class="left">{{item2.describe}}</td>
									<td class="length">{{(item2.min || item2.min == 0)?item2.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item2.max || item2.max == 0)?item2.max:'-'}}</td>
									<td class="reg">{{item2.regexp}}</td>
								</tr>
								<template v-if="show.request.two[index2].show"
									v-for="(item3,index3) in item2.children"> <!-- 第三层 -->
								<tr>
									<td class="left field"><input type="button"
										@Click="copyStr(item3.field)" class="copy_btn" value="复制"><span
										class="param_love">->&nbsp;</span><span class="param_love"
										style="color: #9c27b0;">->&nbsp;</span>{{item3.field}} <span
										class="table-show"
										v-if="item3.children && item3.children.length > 0  && add_show_request('3',index3)"
										@Click="show_request('3',index3)">
											{{show.request.three[index3].show?"-":"+"}}</span></td>
									<td class="type">{{item3.type}}</td>
									<td class="required"><span v-if="item3.required"
										class="required_true">是</span> <span v-if="!item3.required"
										class="required_false">否</span></td>
									
									<td class="left">{{item3.describe}}</td>
									<td class="length">{{(item3.min || item3.min == 0 )?item3.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item3.max || item3.max == 0)?item3.max:'-'}}</td>
									<td class="reg">{{item3.regexp}}</td>
								</tr>
								<!-- 第四层 -->
								<tr v-if="show.request.three[index3].show"
									v-for="item4 in item3.children">
									<td class="left field"><input type="button"
										@Click="copyStr(item4.field)" class="copy_btn" value="复制"><span
										class="param_love">->&nbsp;<span class="param_love"
											style="color: #9c27b0;">->&nbsp;</span> <span
											class="param_love" style="color: red;">->&nbsp;</span>
									</span>{{item4.field}}</td>


									<td class="type">{{item4.type}}</td>
									<td class="required"><span v-if="item4.required"
										class="required_true">是</span> <span v-if="!item4.required"
										class="required_false">否</span></td>
									<td class="left">{{item4.describe}}</td>
									<td class="length">{{(item4.min || item4.min == 0)?item4.min:'-'}}&nbsp;&nbsp;/&nbsp;&nbsp;{{(item4.max || item4.max == 0)?item4.max:'-'}}</td>
									<td class="reg">{{item4.regexp}}</td>
								</tr>
								</template>
								</template> </template> </template>
							</tbody>
						</table>
					</div>
					<!-- 返回数据 -->
					<div class="content-table">
						<div class="title">
							Response：&nbsp;&nbsp;&nbsp;&nbsp; <span class="tag"
								v-show="selectionInterface.responseMethod">{{selectionInterface.responseMethod}}</span>
						</div>
						<table class="bordered">
							<thead>
								<tr>
									<th class="left field_res">字段</th>

									<th class="type">类型</th>
									<th class="required">必填</th>
									<th class="left">示例说明</th>
								</tr>
							</thead>
							<tbody>
								<template v-for="(item,index) in selectionInterface.responses">
								<!-- 第一层 -->
								<tr>
									<td class="left field_res"><input type="button"
										@Click="copyStr(item.field)" class="copy_btn" value="复制">{{item.field}}
										<span class="table-show"
										v-if="item.children && item.children.length > 0  && add_show_response('1',index)"
										@Click="show_response('1',index)">
											{{show.response.one[index].show?"-":"+"}}</span></td>

									<td class="type">{{item.type}}</td>
									<td class="required"><span v-if="item.required"
										class="required_true">是</span> <span v-if="!item.required"
										class="required_false">否</span></td>
									<td class="left">{{item.describe}}</td>
								</tr>
								<template v-if="show.response.one[index].show"
									v-for="(item2,index2) in item.children"> <!-- 第二层 -->
								<tr>
									<td class="left"><input type="button"
										@Click="copyStr(item2.field)" class="copy_btn" value="复制">
										<span class="param_love">->&nbsp;</span> {{item2.field}} <span
										class="table-show"
										v-if="item2.children && item2.children.length > 0  && add_show_response('2',index2)"
										@Click="show_response('2',index2)">
											{{show.response.two[index2].show?"-":"+"}}</span></td>

									<td class="type">{{item2.type}}</td>
									<td class="required"><span v-if="item2.required"
										class="required_true">是</span> <span v-if="!item2.required"
										class="required_false">否</span></td>
									<td class="left">{{item2.describe}}</td>
								</tr>
								<template v-if="show.response.two[index2].show"
									v-for="(item3,index3) in item2.children"> <!-- 第三层 -->
								<tr>
									<td class="left"><input type="button"
										@Click="copyStr(item3.field)" class="copy_btn" value="复制">
										<span class="param_love">->&nbsp;<span style="color: #9c27b0;">-></span>&nbsp;
									</span>{{item3.field}} <span class="table-show"
										v-if="item3.children && item3.children.length > 0  && add_show_response('3',index3)"
										@Click="show_response('3',index3)">
											{{show.response.three[index3].show?"-":"+"}}</span></td>

									<td class="type">{{item3.type}}</td>
									<td class="required"><span v-if="item3.required"
										class="required_true">是</span> <span v-if="!item3.required"
										class="required_false">否</span></td>
									<td class="left">{{item3.describe}}</td>
								</tr>
								<!-- 第四层 -->
								<tr v-if="show.response.three[index3].show"
									v-for="item4 in item3.children">
									<td class="left"><input type="button"
										@Click="copyStr(item4.field)" class="copy_btn" value="复制">
										<span class="param_love">->&nbsp;<span style="color: #9c27b0;">-></span>&nbsp;<span style="color: red;">-></span>&nbsp;
									</span>{{item4.field}}</td>

									<td class="type">{{item4.type}}</td>
									<td class="required"><span v-if="item4.required"
										class="required_true">是</span> <span v-if="!item4.required"
										class="required_false">否</span></td>
									<td class="left">{{item4.describe}}</td>
								</tr>
								</template> </template> </template>
							</tbody>
						</table>
					</div>

				</div>
			</div>

		</div>
		<!-- 页尾 -->
		<div class="content-footer">
			<span class="title">GitHub:&nbsp;&nbsp;<a
				href="https://github.com/ddm4j/spring-boot-api-document"
				target="_blank">https://github.com/ddm4j/spring-boot-api-document</a></span>
		</div>

		<div class="my_tip">
			<div class="copy_tip" v-show="copy_tip">{{copy_str}}</div>
		</div>
		<div class="my_tip">
			<div class="copy_tip tip_error" v-show="login_tip">{{login_str}}</div>
		</div>
		<!-- 测试窗口 -->
		<template>
			<div v-drag id="test_box" v-show="test_show && login">
				<div id="test_bar" title="按鼠标左键可拖动">测试窗口&nbsp;&nbsp;-&nbsp;&nbsp;{{selectionInterface.name}}
					<button @click="click_test_colse" class="test_close">隐藏</button>
				</div>
        		<div id="test_content">
        			<div>请求路径:&nbsp;&nbsp;{{selectionInterface.uri}}</div>
        			<hr class="test_hr" />
        			<div>请求方式:&nbsp;&nbsp;
        				<select v-model="test_method" :disabled="selectionInterface.method">
        					<option value="POST">POST</option>
							<option value="GET">GET</option>
							<option value="PUT">PUT</option>
							<option value="PATCH">PATCH</option>
							<option value="DELETE">DELETE</option>
        				</select>
        				
        			</div>
        			<hr class="test_hr" />
        			<div class="test_content">
        				<div title="自己添加的会覆盖接口要求的同名请求头参数">请求头：Headers <button @click="click_add_header" class="add_header">添加</button> </div>
        				<div class="test_param_content">
        					<div v-if="test_headers && test_headers.length > 0" v-for="(item,index) in test_headers" key="index">
        						<div class="test_item_center">
        							<span class="test_name">{{item.field}}&nbsp;&nbsp;:</span>
       								<span class="test_input_span test_input"><input v-model="test_headers[index].value"></input></span>
        						</div>
        					</div>
        					<div v-if="test_headers_custom && test_headers_custom.length > 0" v-for="(item,index) in test_headers_custom" key="index">
        						<div class="test_item_center">
        							<span class="test_name"><input :value="item.field" v-model="test_headers_custom[index].field" class="test_input_field"></input>&nbsp;&nbsp;:</span>
       								<span class="test_input_span">
       									<input v-model="test_headers_custom[index].value" class=""></input>
       									<span class="test_delete_header" @click="del_header(index)">x</span>
       								</span>
        						</div>
        					</div>
        				</div>
        			</div>
        			<hr class="test_hr" />
        			<div class="test_content" v-if="test_uri_params && test_uri_params.length > 0">
        				<div>路径参数：URI</div>
        				<div class="test_param_content">
        					<div v-for="(item,index) in test_uri_params" key="index">
        						<div class="test_item_center">
        							<span class="test_name">{{item.field}}&nbsp;&nbsp;:</span>
       								<span class="test_input_span test_input"><input v-model="test_uri_params[index].value"></input></span>
        						</div>
        					</div>
        				</div>
        				<hr class="test_hr" />
        			</div>
        			
        			<div class="test_content" v-if="test_params && test_params.length > 0 && test_get_param">
        				<div>请求参数：Request <span class="test_json_tab">GET</span></div>
        				<div class="test_param_content">
        					<form action="" id="myFormGet">
        						<div v-for="(item,index) in test_params" key="index" class="test_item" >
	       							<!-- 去除扫描出来，Object 类型的参数，后台无法接收 -->
	      							<div class="test_item_center" v-if="(item.type.indexOf('Object') == -1 || item.type.indexOf('Object<?>') != -1) && item.get">
	      								<span class="test_name">
	      									{{item.array == 2?"":item.field}}
	      									&nbsp;&nbsp;
	      									{{item.array?"":":"}}
	      									</span>
	      								<span class="test_input_span" :class="item.array?'':'test_input'">
	      									<input :name="item.field" v-model="test_params[index].value"></input>
	      								</span>
	      							</div>
        						</div>
        					</form>
        				</div>
        			</div>
        			
        			<div class="test_content" v-if="test_params && test_params.length > 0">
        				<div>请求参数：Request <span class="test_json_tab" v-show="selectionInterface.json">JSON</span></div>
        				<div class="test_param_content">
        					<div class="test_item_json" v-if="selectionInterface.json">
        						<textarea rows="15" cols="50" style="resize: none;" v-model="test_param_json"></textarea>
        					</div>
        					<form action="" id="myFormParam">
        						<div v-for="(item,index) in test_params" key="index" class="test_item" v-if="!selectionInterface.json">
	       							<!-- 去除扫描出来，Object 类型的参数，后台无法接收 -->
	      							<div class="test_item_center" v-if="(item.type.indexOf('Object') == -1 || item.type.indexOf('Object<?>') != -1) && !item.get">
	      								<span class="test_name">
	      									{{item.array == 2?"":item.field}}
	      									&nbsp;&nbsp;
	      									{{item.array?"":":"}}
	      									</span>
	      								<span class="test_input_span" :class="item.array?'':'test_input'">
	      									<input :name="item.field" v-model="test_params[index].value" :type="item.type.indexOf('File') != -1?'file':'text'"></input>
	      									<span class="test_delete_header" @click="add_array_param(index)" v-if="item.array == 1">+</span>
	      									<span class="test_delete_header" @click="del_array_param(index)" v-if="item.array == 2">x</span>
	      								</span>
	      							</div>
        						</div>
        					</form>
        				</div>
        			</div>
        			<div class="test_btn_div">
	        			<button class="test_btn_send" @click="click_send">send</button>
	        			<button class="test_clean_btn" @click="clean_response">clean</button>
        			</div>
        			<div class="test_res_content" v-show="test_res_center">
        				<pre id="test_res_center" v-html="test_res_center"></pre>
        			</div>
        		</div>
			</div>
		</template>
	</div>
	<script>
    var vm = new Vue({
        el: '#vue_app',
        data: {
            system:"DDM API Document",
            version:"V1.0",
            describe:"高效,快捷，免费的接口文档管理工具，后端数据校验工具",
            // 复制提示
            copy_str:"",
            copy_tip:false,
            // 登录提示
            login_tip: false,
            login_str: "",
            // 账号密码
            account: null,
            password: null,
            is_input: false,
            // 是否登录
            login: false,
            // 是否初始化
            is_init: true,
            // 是否启用
            enable: true,
            // 接口数据
            interfaceDatas: [
                {name: "a"},
                {name: "b"}
            ],
            // 折叠
            show:{
            	response:{
            		one:[],
            		two:[],
            		three:[]
            	},
            	request:{
            		one:[],
	        		two:[],
	        		three:[]
            	}
            },
            selectionController: {},// 选择的Controller
            selectionInterface: {},// 选择的接口
            scan_str: "",// 搜索输入内容
            test_show: true,// 是否显示测试窗口
            test_method: 'POST', // 请求方式
            test_json: false,// 是不是 JSON 请求
            test_get_param: false,// 有没有get请求参数
            test_headers:[],// 请求头参数
            test_headers_custom:[],// 自定义请求头参数
            test_uri_params: [],// 路径参数
            test_params: [],// 请求参数
            test_param_json: "",// json 请求参数
            test_res_center: '',// 测试返回结果
           
            
        },
        // 添加鼠标拖动指令
        directives: {
        	drag(el, bindings){
       	      el.onmousedown = function(e) {
       	    	// 限制，只能是拖动标题才能移动
       	    	if(e.path[0].id != "test_bar"){
       	    		return;
       	    	}
       	        var disx = e.pageX - el.offsetLeft;
       	        var disy = e.pageY - el.offsetTop;
       	        
       	        document.onmousemove = function (e) {
       	          el.style.left = e.pageX - disx + 'px';
       	          el.style.top = e.pageY - disy + 'px';
       	        }
       	        document.onmouseup = function() {
       	          document.onmousemove = document.onmouseup = null;
       	        }
       	      }
       	    }
        },
        created(){
            var that = this;
            if(typeof(sessionStorage) !== undefined){
            	 let account = sessionStorage.getItem("login_account");
            	 let password = sessionStorage.getItem("login_password");
            	 if(account || password){
            		 that.account = account;
            		 that.password = password;
            	 }
            }else{
            	console.log("不支持 sessionStorage")
            }
            that.loadData();// 加载数据
        },
        methods: {
        	// 点击清空按钮
        	clean_response(){
        		this.test_res_center = "<span class='test_response_empty'>Response data</span>";
        	},
        	// 添加form-data的数组数据项
        	add_array_param(index){
        		this.test_params.splice(index+1,0,{array:2,type:this.test_params[index].type,field:this.test_params[index].field,value:""});
        	},
        	// 删除form-data的数组数据项
        	del_array_param(index){
        		this.test_params.splice(index,1);
        	},
        	// 点击测试窗口按钮，打开测试窗口
        	click_test(){
        		this.test_show = true;
        		//$("#test_box").css("top:158px;right:12px");
        		// 显示位置还原，避免拖出浏览器，而无法显示
        		var box = document.getElementById("test_box");
        		box.style.left = "";
        		box.style.top = "155px";
        		box.style.right = "10px";
        	},
        	// 点击隐藏测试窗口按钮
        	click_test_colse(){
        		this.test_show = false;
        		this.copyStr("已隐藏测试窗口,打开按钮在右上角处",true);
        	},
        	// 点击发送按钮
        	click_send(){
        		let that = this;
        		var url = that.selectionInterface.uri;
        		// 整理请求头参数
        		var headers = {};
        		// 固定请求头
        		if(that.test_headers && that.test_headers.length > 0){
        			that.test_headers.forEach(function(item,index){
        				headers[item.field] = item.value;
        			});
        		}
        		// 自定义请求头
        		if(that.test_headers_custom && that.test_headers_custom.length > 0){
        			that.test_headers_custom.forEach(function(item,index){
        				headers[item.field] = item.value;
        			});
        		}
        		//console.log(headers);
        		// 整理URI参数
        		if(that.test_uri_params && that.test_uri_params.length > 0){
        			that.test_uri_params.forEach(function(item,index){
        				url = url.replaceAll("{"+item.field+"}",item.value);
        			});
        		}
        		// 整理Get请求参数
        		var getParams = [];
        		var urlGetParamStr = "";
        		if(that.test_params && that.test_params.length > 0){
        			that.test_params.forEach(function(item,index){
        				console.log('param',item)
        				if(item.get){
        					urlGetParamStr += item.field+"="+item.value+"&";
        				}
        			})
        		}
        		if(urlGetParamStr.length > 0){
        			urlGetParamStr = "?"+urlGetParamStr;
        			urlGetParamStr = urlGetParamStr.slice(0,urlGetParamStr.lastIndexOf('&'));
        		}
        		console.log("urlGet:"+urlGetParamStr);
        		// 整理请求参数
        		var params = null;
        		if(!that.selectionInterface.json && that.test_params && that.test_params.length > 0){
        			params = new FormData(document.querySelector("#myFormParam"));
        		}
        		// console.log(params)
        		// 请求后端
        		var method = that.selectionInterface.method;
        		if(!method || method == ''){
        			method = 'post';
        		}
        		
        		// 判断是不是 json 请求
        		if(that.selectionInterface.json){
        			params = that.test_param_json;
        			headers['Content-Type'] = "application/json; charset=UTF-8";
        		}
        		
        		var dataType = that.selectionInterface.json?"json":null;
        		$.ajax({
                    url: url + urlGetParamStr,
                    type:method,
                    headers: headers,
                    data: params,
                    dataType: dataType,
                    contentType:false,
                    processData:false,// 不格式化数据
                    success: function(data){
                        console.log(data);
                        that.test_res_center = that.syntaxHighlight(data);
                    },
                    error: function(){
                        alert('请求失败，请检查网络');
                    }
                });
        		
        	},
        	// 点击添加自定义请求头
        	click_add_header(){
        		this.test_headers_custom.push({field:"",value:""});
        	},
        	// 点击删除算定义请求头
        	del_header(index){
        		this.test_headers_custom.splice(index,1);
        	},
        	// 格式JSON输出
        	syntaxHighlight(json) {
                if (typeof json != 'string') {
                    json = JSON.stringify(json, undefined, 2);
                }
                json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
                return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function(match) {
                    var cls = 'number';
                    if (/^"/.test(match)) {
                        if (/:$/.test(match)) {
                            cls = 'key';
                        } else {
                            cls = 'string';
                        }
                    } else if (/true|false/.test(match)) {
                        cls = 'boolean';
                    } else if (/null/.test(match)) {
                        cls = 'null';
                    }
                    return '<span class="' + cls + '">' + match + '</span>';
                });
            },
        	// 添加返回值索引
        	add_show_request(lovel,index){
        		if(1 == lovel){
        			for(var i=this.show.request.one.length;i<=index;i++){
    					this.show.request.one.push({show:false});
    				}
        		}else if(2 == lovel){
        			for(var i=this.show.request.two.length;i<=index;i++){
    					this.show.request.two.push({show:false});
    				}
        		}else{
        			for(var i=this.show.request.three.length;i<=index;i++){
    					this.show.request.three.push({show:false});
    				}
        		}
        		return true;
        	},
        	// 是否显示 返回值
        	show_request(lovel,index){
        		if(1 == lovel){
        			if(null == this.show.request.one[index]){
        				for(var i=this.show.request.one.length;i<=index;i++){
        					this.show.request.one.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.request.one[index].show){
        					this.show.request.one[index].show = false;
        					return true;
        				}else{
        					this.show.request.one[index].show = true;
        					return false;
        				}
        			}
        		}else if(2 == lovel){
        			if(null == this.show.request.two[index]){
        				for(var i=this.show.request.two.length;i<=index;i++){
        					this.show.request.two.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.request.two[index].show){
        					this.show.request.two[index].show = false;
        					return true;
        				}else{
        					this.show.request.two[index].show = true;
        					return false;
        				}
        			}
        		}else{
        			if(null == this.show.request.three[index]){
        				for(var i=this.show.request.three.length;i<=index;i++){
        					this.show.request.three.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.request.three[index].show){
        					this.show.request.three[index].show = false;
        					return true;
        				}else{
        					this.show.request.three[index].show = true;
        					return false;
        				}
        			}
        		}
        		return true;
        	},
        	// 添加返回值索引
        	add_show_response(lovel,index){
        		if(1 == lovel){
        			for(var i=this.show.response.one.length;i<=index;i++){
    					this.show.response.one.push({show:false});
    				}
        		}else if(2 == lovel){
        			for(var i=this.show.response.two.length;i<=index;i++){
    					this.show.response.two.push({show:false});
    				}
        		}else{
        			for(var i=this.show.response.three.length;i<=index;i++){
    					this.show.response.three.push({show:false});
    				}
        		}
        		return true;
        	},
        	// 是否显示 返回值
        	show_response(lovel,index){
        		if(1 == lovel){
        			if(null == this.show.response.one[index]){
        				for(var i=this.show.response.one.length;i<=index;i++){
        					this.show.response.one.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.response.one[index].show){
        					this.show.response.one[index].show = false;
        					return true;
        				}else{
        					this.show.response.one[index].show = true;
        					return false;
        				}
        			}
        		}else if(2 == lovel){
        			if(null == this.show.response.two[index]){
        				for(var i=this.show.response.two.length;i<=index;i++){
        					this.show.response.two.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.response.two[index].show){
        					this.show.response.two[index].show = false;
        					return true;
        				}else{
        					this.show.response.two[index].show = true;
        					return false;
        				}
        			}
        		}else{
        			if(null == this.show.response.three[index]){
        				for(var i=this.show.response.three.length;i<=index;i++){
        					this.show.response.three.push({show:false});
        				}
        				return true;
        			}else{
        				if(this.show.response.three[index].show){
        					this.show.response.three[index].show = false;
        					return true;
        				}else{
        					this.show.response.three[index].show = true;
        					return false;
        				}
        			}
        		}
        		return true;
        	},
        	copyStr(str,isNotCopy){
        		var that = this;
        		this.copy_str = (isNotCopy?'':'copy：')+str;
        		this.copy_tip = true;
        		// 倒计时，消失
        		setTimeout(function(){
        			that.copy_tip = false;
        		},3000)
        		
        		 var clipboard = new Clipboard('.copy_btn', {
                     text: function() {
                         return str;
                     }
                 });
             		clipboard.on('success', function(e) {
                     console.log(e);
                 });

                 clipboard.on('error', function(e) {
                     console.log(e);
                 });
        	},
        	// 输入框搜索事件
        	sacn: function(e){
        		var that = this;
        		//console.log(that.scan_str)
        		
        		for(var i=0;i<this.interfaceDatas.length;i++){
        			var hide = true;
        			
        			for(var j=0;j<this.interfaceDatas[i].interfaces.length;j++){
        				var hideSub = true;
        				if(this.interfaceDatas[i].interfaces[j].name.toLowerCase().indexOf(this.scan_str.toLowerCase()) != -1){
        					hide = false;
        					hideSub = false;
        				}else if(this.interfaceDatas[i].interfaces[j].uri.toLowerCase().indexOf(this.scan_str.toLowerCase()) != -1){
        					hide = false;
        					hideSub = false;
        				}
        				this.interfaceDatas[i].interfaces[j].hide = hideSub;
        			}
        			if(hide){
        				if(this.interfaceDatas[i].name.toLowerCase().indexOf(this.scan_str.toLowerCase()) != -1){
        					hide = false;
        				}
        			}
        			this.interfaceDatas[i].hide = hide;
        		}
        		
        	},
        	// 初始化加载数据
            loadData: function () {
                var that = this;
                // 加载数据
                $.ajax(
                        {
                            url: "document",
                            type: "post",
                            data: {
                            	account: that.account,
                            	password: that.password
                            },
                            success: function (data) {
                                //console.log("收到数据：", data);
                               
                                if(data.name){
                                	that.system = data.name;
                                }
                               	if(data.version){
                               	 	that.version = data.version;
                               	}
                               	if(data.describe){
                               		that.describe = data.describe;
                               	}
                                
                                if (1000 == data.code) {
                                	
                                	// 保存输入的数据
                                   	if(that.account || that.passowrd){
                                   		sessionStorage.setItem("login_account",that.account);
                                      	sessionStorage.setItem("login_password",that.password);
                                   	}
                                	
                                	that.login = true;
                                	that.login_tip = false;
                                    // datas = data.content;
                                    //console.log("请求成功,开始加载数据", data.content);
                                    that.interfaceDatas = data.controllers;
                                    // 延时初始化插件，由使用 jQuery 菜单，所以要延时
                                    // 默认选中数据
                                    that.selectionController = data.controllers[0];
                                    that.selectionInterface = data.controllers[0].interfaces[0];
                                    
                                    /* that.test_headers =  that.selectionInterface.heads;// 请求头参数
                                    that.test_uri_params =  that.selectionInterface.uriParams;// uri 参数
                                    that.test_params =  that.selectionInterface.parameters;// 请求参数 */
                                    that.myClickOne(that.selectionController,that.selectionInterface)
                                    // 延时加载导航
                                    setTimeout(function () {
                                        jQuery("#jquery-accordion-menu").jqueryAccordionMenu();
                                        //绑定顶部导航切换
                                        $("#menu-list li").on("click", function () {
                                            $("#menu-list li.active").removeClass("active");
                                            $(this).addClass("active");
                                        });
                                    }, 500)

                                }else if(2001 == data.code){
                                	
                                	if(that.is_init){
                                		that.login = false;
                                	}else{
                                    	that.login_tip = true;
                                    	that.login_str = "账号或密码错误，请重新输入！";
                            			
                            			setTimeout(function(){
                                			that.login_tip = false;
                                		},3000)
                                	}
                                	
                                	// 删除输入的数据
                                   	sessionStorage.removeItem("login_account");
                                    sessionStorage.removeItem("login_password");
                                }else if(3001 == data.code){
                                	if(that.is_init){
                                		that.login = false;
                                	}else{
	                                	that.login_tip = true;
	                                	that.login_str = "账号或密码不能为空！";
	                        			
	                        			setTimeout(function(){
	                            			that.login_tip = false;
	                            		},3000)
                                	}
                                }else if(1001 == data.code){
                                	that.login = false;
	                               	that.login_tip = true;
	                               	that.login_str = "接口文档已禁止浏览，请联系开发人员！";
	                               	that.enable = false;
                                }else{
                                	that.login_tip = true;
                                	that.login_str = "系统异常！";
                        			
                        			setTimeout(function(){
                            			that.login_tip = false;
                            		},3000)
                                }
                                that.is_init = false;

                            }
                        }
                )
            },
            // 点击菜单事件
            myClickOne: function (item, interfaces) {
            	this.show.response.one = [];
                this.show.response.two = [];
                this.show.response.three = [];
                this.selectionController = item;
                this.selectionInterface = interfaces;
                this.test_headers = interfaces.heads;// 请求头参数
                this.test_uri_params = interfaces.uriParams;// uri 参数
                this.test_params = Object.create(interfaces.parameters);// 请求参数
                this.test_method = interfaces.method?interfaces.method.toUpperCase():"POST";// 请求方式，默认POST
                this.clean_response();// 清空返回数据
                let that = this;
                that.test_get_param = false;
                // 判断有没有 get 请求参数
                if(this.test_params && this.test_params.length > 0){
                	for(var i=0;i<this.test_params.length;i++){
                    	if(this.test_params[i].get){
                    		that.test_get_param = true;
                    		break;
                    	}
                    }
                }
                
                
                if(!interfaces.json){
                	this.test_params.forEach(function(item,index){
                		if(item.type.indexOf("Array") == 0){
                			item['array'] = 1;
                		}
                	})
                }
                
                // json 请求，格式输出
                if(interfaces.json){
                	var data = {};// 数据
                	var arrayNum = 0;// array次数
                	interfaces.parameters.forEach(function(item,index){
                		if(!item.get){
                			if(item.children){
                    			var data2 = {};
                    			item.children.forEach(function(item2,index2){
                    				if(item2.children){
                    					var data3 = {};
                    					item2.children(function(item3,index3){
                    						if(item3.children){
                    							var data4 = {};
                    							item3.children.forEach(function(item4,index4){
                    								arrayNum = that.queryStrNum(item4.type,"Array");
                                        			data4[item4.field] = that.createJsonArray("",arrayNum);
                    								//data4[item4.field] = "";
                    								//console.log("data4",data4)
                    							})
                    							arrayNum = that.queryStrNum(item3.type,"Array");
                    							data3[item3.field] = that.createJsonArray(data4,arrayNum);
                    						}else{
                    							//data3[item3.field] = "";
                    							arrayNum = that.queryStrNum(item3.type,"Array");
                                    			data3[item3.field] = that.createJsonArray("",arrayNum);
                    						}
                    						//console.log("data3",data3)
                    					})
                    					arrayNum = that.queryStrNum(item2.type,"Array");
            							data2[item2.field] = that.createJsonArray(data3,arrayNum);
                    				}else{
                    					//data2[item2.field] = "";
                    					arrayNum = that.queryStrNum(item2.type,"Array");
                            			data2[item2.field] = that.createJsonArray("",arrayNum);
                    				}
                    				//console.log("data2",data2)
                    			})
                    			arrayNum = that.queryStrNum(item.type,"Array");
    							data[item.field] = that.createJsonArray(data2,arrayNum);
    							//console.log("data1 arr",data,arrayNum)
                    		}else{
                    			arrayNum = that.queryStrNum(item.type,"Array");
                    			data[item.field] = that.createJsonArray("",arrayNum);
                    			//console.log("data1 fi",data,arrayNum);
                    		}
                		}
                	})
                	arrayNum = that.queryStrNum(interfaces.jsonMethod,"Array");
                	that.test_param_json = JSON.stringify(that.createJsonArray(data,arrayNum), undefined, 2);
                }
            },
            // 查询字符中某字符出现次数
            queryStrNum(str,query){
            	var num = 0;
            	var index = str.indexOf(query);
            	while(index != -1){
            		num++;// 次数+1
            		index = str.indexOf(query,index+1);
            	}
            	return num;// 返回数量
            },
            // 处理json array
            createJsonArray(jsonObj,num){
            	var data = jsonObj;
            	if(num > 0){
            		for(var i = 0;i < num;i++){
                		var data2 = [data];
                		data = data2;
                	}
            	}
            	return data;
            },
        }
    })
</script>
</body>
</html>
